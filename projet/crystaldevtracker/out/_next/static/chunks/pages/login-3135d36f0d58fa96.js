(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(4009)}])},7836:function(e,t){"use strict";t.Z={pk_projet:"pk_projet",pk_user:"pk_user",username:"username",current_task:"current_task",project_name:"project_name"}},4941:function(e,t,a){"use strict";var s=a(6546);class r{login(e,t){return s.Z.login(e,t)}logout(){return s.Z.logout()}checkLogin(){return s.Z.checkLogin()}}t.Z=r},4009:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(5893),r=a(7294),n=a(1664),o=a.n(n),c=a(4941),i=a(7836),d=()=>{let[e,t]=(0,r.useState)(""),[a,n]=(0,r.useState)(""),[d,p]=(0,r.useState)(""),[u,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=window.localStorage.getItem(i.Z.username);e&&t(e)},[]),(0,s.jsxs)("form",{className:"max-w-md mx-auto p-5 bg-white rounded-lg shadow-md",onSubmit:t=>{t.preventDefault(),new c.Z().login(e,a).then(t=>{200===t.code?(window.sessionStorage.setItem(i.Z.pk_user,t.body.pk_user),window.sessionStorage.setItem(i.Z.username,t.body.username),u?window.localStorage.setItem(i.Z.username,e):window.localStorage.clear(),window.location.href="/151/client/dashboard"):p(t.message)})},children:[(0,s.jsxs)("div",{className:"mb-4 block",children:[(0,s.jsx)("label",{htmlFor:"username",className:"text-black font-semibold",children:"Nom d'utilisateur"}),(0,s.jsx)("input",{type:"username",id:"username",value:e,onChange:e=>t(e.target.value),className:"mt-1 p-2 w-full text-black bg-gray-200 rounded-md shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",required:!0,placeholder:"Ex: KibiByte"})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"password",className:"text-black font-semibold",children:"Mot de passe"}),(0,s.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>n(e.target.value),className:"mt-1 p-2 w-full text-black bg-gray-200 rounded-md shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",required:!0,placeholder:"Mot de passe"})]}),(0,s.jsxs)("div",{className:"mb-3 inline-block",children:[(0,s.jsx)("span",{children:(0,s.jsx)("input",{type:"checkbox",name:"remember",value:u,onChange:e=>l(e.target.checked)})}),(0,s.jsx)("span",{children:(0,s.jsx)("label",{className:"text-black ml-1",children:"Se rappeler de mon nom d'utilisateur"})})]}),d&&(0,s.jsx)("div",{className:"text-red-500 mb-4",children:d}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("button",{type:"submit",className:"w-full bg-black text-white py-2 px-4 btn",children:"Se connecter"}),(0,s.jsx)(o(),{href:"/register",className:"text-black mt-3 text-xs hover:text-pink-400",children:"Pas de compte ? Inscrivez-vous ici"})]})]})};function p(){return(0,s.jsxs)("div",{className:"h-screen flex flex-col items-center justify-center",children:[(0,s.jsx)("h1",{className:"text-3xl text-pink-400 font-bold mb-8",children:"Connectez-vous \xe0 votre compte"}),(0,s.jsx)("div",{className:"w-screen flex items-center justify-center bg-black",children:(0,s.jsx)(d,{})})]})}a(8828)},6546:function(e,t,a){"use strict";var s=a(5121),r=a(7836);let n="https://abrahaml.emf-informatique.ch/151/srv/";t.Z={async login(e,t){try{return(await s.Z.post(n+"session.php",{action:"login",username:e,password:t},{headers:{"Content-Type":"application/json"},withCredentials:!0})).data}catch(e){return e.response.data}},async logout(){try{return(await s.Z.post(n+"session.php",{action:"logout"},{headers:{"Content-Type":"application/json"},withCredentials:!0})).data}catch(e){return e.response.data}},async checkLogin(){try{return(await s.Z.get(n+"session.php?action=checkLogin",{withCredentials:!0})).data}catch(e){return e.response.data}},async addProject(e,t){try{return(await s.Z.post(n+"ProjectServices.php",{name:e,description:t,fk_user:window.sessionStorage.getItem(r.Z.pk_user)},{headers:{"Content-Type":"application/json"}})).data}catch(e){return e.response.data}},async loadProjects(){try{return(await s.Z.get(n+"ProjectServices.php",{params:{fk_user:window.sessionStorage.getItem(r.Z.pk_user)}})).data}catch(e){return e.response.data}},async loadProjectNtasks(e,t){try{return(await s.Z.get(n+"ProjectServices.php",{params:{pk_projet:e,fk_user:t}})).data}catch(e){return e.response.data}},async updateTask(e,t,a,r,o,c){try{return(await s.Z.put(n+"TaskServices.php",{action:"updateTask",pk_tache:e,nom:t,description:a,fk_projet:c,etat:r,temps:o},{headers:{"Content-Type":"application/json"}})).data}catch(e){return e.response.data}},async updateEtatTask(e,t){try{return(await s.Z.put(n+"TaskServices.php",{action:"updateEtatTask",pk_tache:e,etat:t},{headers:{"Content-Type":"application/json"}})).data}catch(e){return e.response.data}},async addTask(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;try{return(await s.Z.post(n+"TaskServices.php",{titre:e,description:t,fk_projet:o,etat:a,temps:r,dateCreation:new Date},{headers:{"Content-Type":"application/json"}})).data}catch(e){return e.response.data}},async deleteTask(e){try{return(await s.Z.delete(n+"TaskServices.php",{params:{pk_tache:e}})).data}catch(e){return e.response.data}},async addUser(e,t){try{return(await s.Z.post(n+"UserServices.php",{username:e,password:t},{headers:{"Content-Type":"application/json"}})).data}catch(e){return e.response.data}}}},8828:function(){}},function(e){e.O(0,[121,664,713,888,774,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);